Original document: https://libusb.sourceforge.io/api-1.0/group__libusb__syncio.html

The document was translated for personal use [@mikelpsv](https://github.com/mikelpsv)



На этой странице описывается синхронный (блокирующий) API libusb для ввода-вывода USB-устройств.

Этот интерфейс прост в использовании, но имеет некоторые ограничения. Более продвинутые пользователи могут вместо этого рассмотреть возможность использования API асинхронного ввода-вывода.

### Функции

##### libusb_control_transfer

Выполняет передачу управления через USB.

Направление передачи выводится из поля bmRequestType установочного пакета.

Значения полей wValue, wIndex и wLength должны быть указаны в порядке следования байтов хоста.

В случае успеха возвращает количество фактически переданных байт
`LIBUSB_ERROR_TIMEOUT`, если время ожидания передачи истекло
`LIBUSB_ERROR_PIPE`, если запрос управления не поддерживается устройством
`LIBUSB_ERROR_NO_DEVICE`, если устройство было отключено
`LIBUSB_ERROR_BUSY`, если вызывается из контекста обработки событий
`LIBUSB_ERROR_INVALID_PARAM`, если размер передачи больше, чем может поддерживать операционная система и/или аппаратное обеспечение (см. Ограничения длины передачи)
код `LIBUSB_ERROR` при других сбоях

##### libusb_bulk_transfer

Выполняет массовую передачу данных через USB.

Направление передачи выводится из битов направления адреса конечной точки.

Для массового чтения поле длины указывает максимальную длину данных, которые вы ожидаете получить. Если поступает меньше данных, чем ожидалось, эта функция вернет эти данные, поэтому обязательно проверьте переданный выходной параметр.

Вы также должны проверить передаваемый параметр на массовую запись. Возможно, не все данные были записаны.

Также проверка передается при работе с кодом ошибки тайм-аута. libusb, возможно, придется разделить вашу передачу на несколько частей, чтобы удовлетворить базовые требования к операционной системе, а это означает, что тайм-аут может истечь после завершения первых нескольких частей. libusb заботится о том, чтобы не потерять какие-либо данные, которые могли быть переданы; не предполагайте, что условия тайм-аута указывают на полное отсутствие ввода-вывода. Дополнительные сведения см. в разделе Тайм-ауты.

Возвращает 0 в случае успеха (и заполняет переданные данные)
`LIBUSB_ERROR_TIMEOUT`, если время передачи истекло (и заполняется переданным)
`LIBUSB_ERROR_PIPE`, если конечная точка остановлена
`LIBUSB_ERROR_OVERFLOW`, если устройство предлагало больше данных, см. Пакеты и переполнения.
`LIBUSB_ERROR_NO_DEVICE`, если устройство было отключено
`LIBUSB_ERROR_BUSY`, если вызывается из контекста обработки событий
`LIBUSB_ERROR_INVALID_PARAM`, если размер передачи больше, чем может поддерживать операционная система и/или аппаратное обеспечение (см. Ограничения длины передачи)
другой код `LIBUSB_ERROR` при других сбоях

##### libusb_interrupt_transfer

Выполняет передачу прерывания USB.

Направление передачи выводится из битов направления адреса конечной точки.

Для чтения с прерыванием поле длины указывает максимальную длину данных, которые вы ожидаете получить. Если поступает меньше данных, чем ожидалось, эта функция вернет эти данные, поэтому обязательно проверьте переданный выходной параметр.

Вы также должны проверить переданный параметр на запись прерывания. Возможно, не все данные были записаны.

Также проверка передается при работе с кодом ошибки тайм-аута. libusb, возможно, придется разделить вашу передачу на несколько частей, чтобы удовлетворить базовые требования к операционной системе, а это означает, что тайм-аут может истечь после завершения первых нескольких частей. libusb заботится о том, чтобы не потерять какие-либо данные, которые могли быть переданы; не предполагайте, что условия тайм-аута указывают на полное отсутствие ввода-вывода. Дополнительные сведения см. в разделе Тайм-ауты.

В качестве интервала опроса используется значение bInterval конечной точки по умолчанию.

Начиная с версии 1.0.21 (LIBUSB_API_VERSION >= 0x01000105), разрешается передавать указатель NULL, если вы не хотите получать о количестве переданных даных.


Для неограниченного ожидания ответ используется значение 0 для параметра timeout (в миллисекундах).

Возвращает 0 в случае успешного вызова
`LIBUSB_ERROR_TIMEOUT`, если время ожидания передачи истекло
`LIBUSB_ERROR_PIPE`, если конечная точка остановлена
`LIBUSB_ERROR_OVERFLOW`, если устройство предлагало больше данных, см. Пакеты и переполнения.
`LIBUSB_ERROR_NO_DEVICE`, если устройство было отключено
`LIBUSB_ERROR_BUSY`, если вызывается из контекста обработки событий
`LIBUSB_ERROR_INVALID_PARAM`, если размер передачи больше, чем может поддерживать операционная система и/или аппаратное обеспечение (см. Ограничения длины передачи)
код `LIBUSB_ERROR` при другой ошибке
